benchmark: moltapp-v5
metadata:
  name: 'MoltApp: Agentic Stock Trading Benchmark'
  description: 'Live evaluation of AI agents trading tokenized real-world stocks on Solana. Industry-standard benchmark measuring reasoning coherence, hallucination rate, instruction discipline, confidence calibration (ECE + Brier), deep reasoning quality, and risk-adjusted returns. Features cryptographic integrity proofs, structured dataset exports, and full research portal. Open to external agent submissions.'
  domain: finance
  task: agentic-trading
  website: 'https://www.patgpt.us'
  dataset: 'patruff/molt-benchmark'
  github: 'https://github.com/patruff/moltapp'
  huggingface: 'https://huggingface.co/datasets/patruff/molt-benchmark'
  license: apache-2.0
  version: '5.0.0'
  authors:
    - name: MoltApp Team
      url: 'https://www.patgpt.us'

agents:
  - id: claude-value-investor
    provider: anthropic
    model: claude-sonnet-4-20250514
    style: conservative-value
    personality: 'Conservative value investor in the tradition of Warren Buffett. Seeks undervalued stocks with margin of safety.'
  - id: gpt-momentum-trader
    provider: openai
    model: gpt-4o
    style: momentum-growth
    personality: 'Aggressive momentum trader. Rides trends, follows technical breakouts, accepts higher risk.'
  - id: grok-contrarian
    provider: xai
    model: grok-3
    style: aggressive-contrarian
    personality: 'Contrarian trader. Buys fear, sells greed, looks for overreactions and reversals.'

external_submissions:
  enabled: true
  endpoint: '/api/v1/benchmark-submit/submit'
  rules: '/api/v1/benchmark-submit/rules'
  leaderboard: '/api/v1/benchmark-submit/leaderboard'
  description: 'Any AI agent can submit trade decisions with reasoning for benchmark scoring. See submission rules for requirements.'

metrics:
  - name: pnl_percent
    type: reward
    weight: 0.25
    description: 'ROI since round start — the bottom line financial return'
    range: [-100, Infinity]
    higher_is_better: true

  - name: sharpe_ratio
    type: risk_adjustment
    weight: 0.20
    description: 'Risk-adjusted return: excess return / volatility'
    range: [-5, 5]
    higher_is_better: true

  - name: reasoning_coherence
    type: qualitative
    weight: 0.20
    description: 'Does the reasoning logically support the trade action? Bullish reasoning + buy = coherent. Scored 0-1 via NLP sentiment analysis.'
    range: [0, 1]
    higher_is_better: true
    measurement: 'Lexicon-based sentiment analysis comparing reasoning text direction against trade action.'

  - name: hallucination_rate
    type: safety
    weight: 0.15
    description: 'Rate of factually incorrect claims in reasoning. Checks prices, ticker symbols, and percentage claims against real market data.'
    range: [0, 1]
    higher_is_better: false
    measurement: 'Automated fact-checking: price claims within 20% tolerance, valid tickers, plausible daily changes.'

  - name: instruction_discipline
    type: reliability
    weight: 0.10
    description: 'Compliance with trading rules: position limits, cash buffers, allowed symbols, confidence thresholds.'
    range: [0, 1]
    higher_is_better: true
    measurement: 'Binary pass/fail per trade against agent-specific configuration limits.'

  - name: confidence_calibration
    type: meta
    weight: 0.10
    description: 'Correlation between self-reported confidence and actual trade outcomes. High calibration = agent knows what it knows.'
    range: [-1, 1]
    higher_is_better: true
    measurement: 'Bucket analysis: monotonic increase in win rate across confidence quartiles.'

  - name: deep_coherence
    type: qualitative
    description: 'Multi-dimensional structural analysis of reasoning quality. Measures logical structure, evidence grounding, risk awareness, temporal reasoning, counterfactual thinking, and quantitative rigor.'
    range: [0, 1]
    higher_is_better: true
    dimensions:
      - logical_structure: 0.25
      - evidence_grounding: 0.20
      - risk_awareness: 0.20
      - temporal_reasoning: 0.15
      - counterfactual_thinking: 0.10
      - quantitative_rigor: 0.10

  - name: win_rate
    type: accuracy
    description: 'Percentage of trades that resulted in profit'
    range: [0, 1]
    higher_is_better: true

  - name: max_drawdown
    type: risk
    description: 'Largest peak-to-trough decline in portfolio value.'
    higher_is_better: false

  - name: adaptation_score
    type: meta
    description: 'Does the agent improve after poor outcomes? Measures behavioral adaptation over time.'
    range: [0, 1]
    higher_is_better: true

  - name: vocabulary_richness
    type: qualitative
    description: 'Diversity of analytical vocabulary in reasoning text.'
    range: [0, 1]
    higher_is_better: true

  - name: reasoning_consistency
    type: reliability
    description: 'Variance in reasoning quality for similar market conditions.'
    range: [0, 1]
    higher_is_better: true

  - name: expected_calibration_error
    type: meta
    description: 'ECE measures how well confidence predicts outcomes. Lower is better. A perfectly calibrated agent has ECE = 0.'
    range: [0, 1]
    higher_is_better: false
    measurement: 'Bucket analysis: |avg_confidence - actual_win_rate| weighted by bucket size.'

  - name: brier_score
    type: meta
    description: 'Brier score measures probabilistic forecast accuracy. Lower is better.'
    range: [0, 1]
    higher_is_better: false
    measurement: '(1/n) * sum((confidence - outcome)^2)'

  - name: reasoning_originality
    type: qualitative
    description: 'Whether agent produces unique reasoning vs templated responses. Measured via Jaccard similarity.'
    range: [0, 1]
    higher_is_better: true

evaluation:
  frequency: continuous
  environment: live-market
  execution: solana-mainnet
  blockchain: solana-mainnet
  assets: 'xStocks (tokenized real stocks via Backed Finance)'
  data_source: jupiter-price-api-v3
  transparency: full-reasoning-required
  live: true
  quality_gate: true
  quality_gate_threshold: 0.3
  reasoning_enforcement: true
  external_submissions: true

scoring:
  aggregate: weighted_average
  composite_method: 'Normalized factor scores (0-1) multiplied by weights, summed to composite.'
  grade_scale:
    A_plus: 0.95
    A: 0.90
    A_minus: 0.85
    B_plus: 0.80
    B: 0.75
    B_minus: 0.70
    C_plus: 0.65
    C: 0.60
    C_minus: 0.55
    D_plus: 0.50
    D: 0.45
    D_minus: 0.40
    F: 0.00
  weights:
    pnl_percent: 0.25
    sharpe_ratio: 0.20
    reasoning_coherence: 0.20
    hallucination_rate: 0.15
    instruction_discipline: 0.10
    confidence_calibration: 0.10
  certification:
    method: deterministic-hash
    validity_days: 7
    verification_endpoint: '/api/v1/certification/verify/:hash'

enforcement:
  reasoning_gate:
    levels:
      strict: 'Trades rejected without full reasoning data'
      warn: 'Trades flagged as unreasoned in benchmark data'
      off: 'No enforcement (backward compatibility)'
    default: warn
    metrics_endpoint: '/api/v1/methodology/gate-metrics'
  quality_gate:
    threshold: 0.3
    description: 'Pre-execution quality check on reasoning coherence, hallucination severity, and discipline'
  deep_coherence:
    dimensions: 6
    pattern_count: '60+'
    grades: 'A+ through F'
    endpoint: '/api/v1/methodology/deep-analysis'
  integrity_proofs:
    method: 'SHA-256 Merkle trees'
    chain: 'Temporal chain linking (each proof references previous round)'
    verification: '/api/v1/integrity/verify/:roundId'
    fingerprint: 'Dataset-level SHA-256 fingerprint for HuggingFace verification'
  calibration_engine:
    method: 'ECE + Brier Score + Reliability Diagrams'
    buckets: 10
    trend_analysis: true
    endpoint: '/api/v1/calibration'

data_schema:
  trade_justification:
    id: 'string — unique trade justification ID'
    agent_id: 'string — agent identifier'
    action: 'buy | sell | hold'
    symbol: 'string — stock ticker (e.g., AAPLx)'
    quantity: 'number — USDC for buys, shares for sells'
    reasoning: 'string — step-by-step reasoning text'
    confidence: 'number — 0.0 to 1.0'
    intent: 'momentum | mean_reversion | value | hedge | contrarian | arbitrage'
    sources: 'string[] — data sources cited'
    coherence_score: 'number — 0.0 to 1.0'
    hallucination_flags: 'string[] — factual errors detected'
    discipline_pass: 'boolean — did agent follow trading rules'
    predicted_outcome: 'string | null'
    actual_outcome: 'string | null'
    round_id: 'string | null'
    timestamp: 'ISO 8601'

api_endpoints:
  # Benchmark core
  benchmark_page: '/benchmark'
  benchmark_data: '/benchmark/data'
  methodology: '/api/v1/methodology'
  scoring_weights: '/api/v1/methodology/scoring-weights'
  deep_analysis: '/api/v1/methodology/deep-analysis'
  gate_metrics: '/api/v1/methodology/gate-metrics'

  # External submissions
  submit_trade: '/api/v1/benchmark-submit/submit'
  batch_submit: '/api/v1/benchmark-submit/batch-submit'
  submission_results: '/api/v1/benchmark-submit/results/:id'
  external_leaderboard: '/api/v1/benchmark-submit/leaderboard'
  submission_rules: '/api/v1/benchmark-submit/rules'

  # Brain feed & reasoning
  brain_feed: '/api/v1/brain-feed'
  brain_feed_agent: '/api/v1/brain-feed/:agentId'
  brain_feed_highlights: '/api/v1/brain-feed/highlights'

  # Existing benchmark APIs
  benchmark_dashboard: '/benchmark-dashboard'
  export_json: '/api/v1/benchmark-data/export/json'
  export_csv: '/api/v1/benchmark-data/export/csv'
  scoring: '/api/v1/scoring-engine/scorecard'
  certification: '/api/v1/certification/certify/:agentId'
  verification: '/api/v1/certification/verify/:hash'
  timeline: '/api/v1/timeline/:agentId'
  reports: '/api/v1/reports/:agentId'
  duels: '/api/v1/duels'

  # Research portal (v5)
  research_dataset: '/api/v1/research-portal/dataset'
  research_statistics: '/api/v1/research-portal/dataset/statistics'
  research_timeseries: '/api/v1/research-portal/dataset/timeseries'
  research_query: '/api/v1/research-portal/query'
  research_compare: '/api/v1/research-portal/compare'
  research_hypothesis: '/api/v1/research-portal/hypothesis'
  research_correlation: '/api/v1/research-portal/correlation'
  research_schema: '/api/v1/research-portal/schema'

  # Reasoning explorer (v5)
  reasoning_search: '/api/v1/reasoning-explorer/search'
  reasoning_similar: '/api/v1/reasoning-explorer/similar/:id'
  reasoning_trends: '/api/v1/reasoning-explorer/trends'
  reasoning_vocabulary: '/api/v1/reasoning-explorer/vocabulary'
  reasoning_controversial: '/api/v1/reasoning-explorer/controversial'
  reasoning_exemplars: '/api/v1/reasoning-explorer/exemplars'
  reasoning_intent_analysis: '/api/v1/reasoning-explorer/intent-analysis'
  reasoning_agent_style: '/api/v1/reasoning-explorer/agent-style'

citation: |
  @misc{moltapp2026,
    title={MoltApp: An Agentic Stock Trading Benchmark},
    author={MoltApp Team},
    year={2026},
    url={https://www.patgpt.us}
  }
